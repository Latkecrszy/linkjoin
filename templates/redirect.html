<html>
    <head>
        <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet"/>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    </head>
    <body onload="NewTab()">

    </body>
    <script>
        function sleep(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function NewTab() {
            const user_links = {{ user_links|tojson|safe }}
            let minute = parseInt("{{ minute }}")
            let day = "{{ day }}"
            let hour = parseInt("{{ hour }}")
            while (true) {
                for (const link of user_links) {
                    let link_hour = parseInt(link["time"].split(":")[0])
                    let link_minute = parseInt(link["time"].split(":")[1])
                    if (link["days"].includes(day) && hour == link_hour && minute == link_minute) {
                        window.open(link["link"])
                    }
                }
                await sleep(60000)
                minute += 1
                if (minute >= 60) {
                    minute -= 60
                    hour += 1
                    if (hour > 24) {
                        location.reload()
                    }
                }
            }
        }
    </script>
</html>